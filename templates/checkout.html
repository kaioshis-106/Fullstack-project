{% extends 'base.html' %}
{% load static %}
{% block content %}

<br><br><br>

<!-- Breadcrumb -->
<div class="container">
    <div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
        <a href="{% url 'home' %}" class="stext-109 cl8 hov-cl1 trans-04">
            Home
            <i class="fa fa-angle-right m-l-9 m-r-10"></i>
        </a>

        <span class="stext-109 cl4">
            Checkout
        </span>
    </div>
</div>

<!-- Empty cart protection -->
{% if not items %}
<div class="container p-t-80 p-b-80 text-center">
    <h3>Your cart is empty</h3>
    <a href="{% url 'shop' %}" class="btn btn-primary mt-3">
        Continue Shopping
    </a>
</div>
{% else %}

<div class="bg0 p-t-75 p-b-85">
    <div class="container">
        <div class="row">

            <!-- ================= BILLING DETAILS ================= -->
            <div class="col-lg-7 col-xl-7 m-b-50">
                <div class="bor10 p-lr-40 p-t-30 p-b-40 p-lr-15-sm">

                    <h4 class="mtext-109 cl2 p-b-30">
                        Billing Details
                    </h4>

                    <form method="POST" >
                        {% csrf_token %}

                        <div class="row">

                            <div class="col-md-6 p-b-15">
                                <label class="stext-102 cl3">First Name *</label>
                                <input type="text" name="first_name"
                                    class="size-111 bor8 stext-102 cl2 p-lr-20"
                                    value="{{ request.user.first_name }}"
                                    required>
                            </div>

                            <div class="col-md-6 p-b-15">
                                <label class="stext-102 cl3">Last Name *</label>
                                <input type="text" name="last_name"
                                    class="size-111 bor8 stext-102 cl2 p-lr-20"
                                    value="{{ request.user.last_name }}"
                                    required>
                            </div>

                            <div class="col-12 p-b-15">
                                <label class="stext-102 cl3">Email *</label>
                                <input type="email" name="email"
                                    class="size-111 bor8 stext-102 cl2 p-lr-20"
                                    value="{{ request.user.email }}"
                                    required>
                            </div>

                            <div class="col-12 p-b-15">
                                <label class="stext-102 cl3">Phone *</label>
                                <input type="text" name="phone"
                                    class="size-111 bor8 stext-102 cl2 p-lr-20"
                                    placeholder="98XXXXXXXX"
                                    required>
                            </div>

                            <div class="col-12 p-b-15">
                                <label class="stext-102 cl3">Address *</label>
                                <input type="text" name="address"
                                    class="size-111 bor8 stext-102 cl2 p-lr-20"
                                    placeholder="Street address"
                                    required>
                            </div>

                            <div class="col-md-6 p-b-15">
                                <label class="stext-102 cl3">City *</label>
                                <input type="text" name="city"
                                    class="size-111 bor8 stext-102 cl2 p-lr-20"
                                    required>
                            </div>

                            <div class="col-md-6 p-b-15">
                                <label class="stext-102 cl3">Postal Code</label>
                                <input type="text" name="postal_code"
                                    class="size-111 bor8 stext-102 cl2 p-lr-20">
                            </div>

                        </div>

                        <!-- Payment button -->
                        <button type="submit"
                            class="flex-c-m stext-101 cl0 size-116 bg1 bor14 hov-btn1 p-lr-15 trans-04 pointer m-t-20">
                            Place Order
                        </button>

                    </form>
                </div>
            </div>

            <!-- ================= ORDER SUMMARY ================= -->
            <div class="col-lg-5 col-xl-5 m-b-50">
                <div class="bor10 p-lr-40 p-t-30 p-b-40 p-lr-15-sm">

                    <h4 class="mtext-109 cl2 p-b-30">
                        Your Order
                    </h4>

                    <!-- Items -->
                    {% for item in items %}
                    <div class="flex-w flex-t p-b-15">
                        <div class="size-208">
                            <span class="stext-110 cl2">
                                {{ item.product.product_name }} Ã— {{ item.quantity }}
                            </span>
                        </div>

                        <div class="size-209 text-right">
                            <span class="mtext-110 cl2">
                                Rs {{ item.sub_total }}
                            </span>
                        </div>
                    </div>
                    {% endfor %}

                    <hr>

                    <!-- Subtotal -->
                    <div class="flex-w flex-t p-b-10">
                        <div class="size-208">
                            <span class="stext-110 cl2">Subtotal:</span>
                        </div>

                        <div class="size-209 text-right">
                            <span class="mtext-110 cl2">
                                Rs {{ cart.total_price }}
                            </span>
                        </div>
                    </div>

                    {% if cart.coupon %}
                    <div class="flex-w flex-t p-b-10">
                        <div class="size-208">
                            <span class="stext-110 cl2">Discount:</span>
                        </div>

                        <div class="size-209 text-right">
                            <span class="mtext-110 cl2 text-success">
                                - Rs {{ cart.discount_amount }}
                            </span>
                        </div>
                    </div>
                    {% endif %}

                    <!-- Total -->
                    <div class="flex-w flex-t p-t-20">
                        <div class="size-208">
                            <span class="mtext-101 cl2">Total:</span>
                        </div>

                        <div class="size-209 text-right">
                            <span class="mtext-110 cl2">
                                Rs {{ cart.final_price }}
                            </span>
                        </div>
                    </div>

                </div>
            </div>

        </div>
    </div>
</div>

{% endif %}

{% endblock %}